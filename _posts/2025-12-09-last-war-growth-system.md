---
layout: post
title: "æ•°å€¼çš„ç§˜å¯† | æ¸¸æˆé€†å‘ç¬”è®°002"
subtitle: "L**t W*ré€†å‘åˆ†æ"
date: 2025-12-09 00:00:00 +0800
author: "lxraa"
background: "/assets/game-reverse/002/background.png"
catalog: true
categories: ["æ¸¸æˆé€†å‘ç¬”è®°"]
tags:
    - Unity
    - IL2CPP
    - Lua
    - æ¸¸æˆé€†å‘
    - æ•°å€¼åˆ†æ
---

> **ã€æ¸¸æˆé€†å‘ç¬”è®°ã€‘** æ˜¯ lxraa çš„æŠ€æœ¯åˆ†äº«ç³»åˆ—ï¼Œè®°å½•"æˆ‘"ä¹ å¾—è€çˆ¹çš„é»‘å®¢æŠ€è‰ºåï¼Œåœ¨æ¸¸æˆé€†å‘é¢†åŸŸçš„æ¢ç´¢ç¬”è®°ï¼ŒåŸºäºçœŸå®æ¸¸æˆé€†å‘åˆ†æè¿‡ç¨‹çš„åŠè™šæ„æ—¥è®°å¼å†™ä½œã€‚  
> ï¼ˆå‹æƒ…æç¤ºï¼‰è¯»å®Œä¹‹åï¼Œä½ å¯èƒ½ä¸€æ—¶åŠä¼šå„¿éƒ½ä¸å¤ªæƒ³å•çº¯ã€Œæ‰“æ¸¸æˆã€äº†ã€‚


---

## ä¸€ã€éº»å°†æ¡Œä¸Šçš„ç©ºä½

![éº»å°†é¦†](/assets/game-reverse/002/majiang.png){: width="800"}
*éº»å°†é¦†*

---

æœ€è¿‘è€çˆ¹æœ‰ç‚¹çƒ¦èºã€‚

é‚£å¤©æ™šä¸Šåƒé¥­çš„æ—¶å€™ï¼Œä»–ç‚¹äº†æ ¹çƒŸï¼Œè¯´ï¼š"æˆ‘é‚£éº»å°†å±€æ•£äº†ã€‚"

è€å¦ˆæ„£äº†ä¸€ä¸‹ï¼š"æ•£äº†ï¼Ÿä¸æ˜¯æ‰“äº†å¿«åå¹´äº†å—ï¼Ÿ"

"è€æä¸æ¥äº†ã€‚"è€çˆ¹è¯´ã€‚

æˆ‘æŠ¬èµ·å¤´ã€‚è€çˆ¹çš„éº»å°†å±€æˆ‘çŸ¥é“â€”â€”æ¯å‘¨ä¸‰æ™šä¸Šé›·æ‰“ä¸åŠ¨ï¼Œå›ºå®šå››ä¸ªäººï¼šè€çˆ¹ã€è€ç‹ã€è€åˆ˜ï¼Œè¿˜æœ‰è€æã€‚ä»æˆ‘åˆä¸­å¼€å§‹å°±è¿™æ ·ï¼Œåç‚¹åŠå‡†æ—¶å›æ¥ï¼Œä¸€èº«çƒŸå‘³ã€‚

æˆ‘å¦ˆé—®ï¼š"è€ææ€ä¹ˆäº†ï¼Ÿ"

è€çˆ¹è¯´ï¼Œè€ææœ€è¿‘ç©æ¸¸æˆä¸Šç˜¾äº†ã€‚

---

è€æè¿™äººï¼Œäº”åå¤šå²ï¼Œé€€ä¼‘å·¥äººï¼Œä»¥å‰åœ¨é€šå·ä¸€å®¶æœºæ¢°å‚å½“è½¦å·¥ã€‚å‚å­å€’é—­åæ‹¿äº†ä¸€ç¬”è¡¥å¿é‡‘ï¼Œå°±åœ¨é™„è¿‘ä¹°äº†å¥—è€ç ´å°ã€‚

ä»–æ²¡ä»€ä¹ˆçˆ±å¥½ï¼Œä¸å–é…’ï¼Œä¸æŠ½çƒŸï¼Œå°±å–œæ¬¢æ‰“éº»å°†ã€‚

è€çˆ¹è¯´ï¼Œè€ææ‰“éº»å°†çš„é£æ ¼å¾ˆç¨³ï¼šä¸è´ªå¤§ç‰Œï¼Œä¸å†’é™©ï¼Œèƒ½èƒ¡å°±èƒ¡ï¼Œè¾“èµ¢éƒ½ä¸å¤§ã€‚

"è·Ÿä»–æ‰“ç‰ŒæŒºèˆ’æœçš„ï¼Œä¸ä¼šæœ‰é‚£ç§å¤§èµ·å¤§è½çš„æ„Ÿè§‰ã€‚"

ä½†ä¸¤ä¸ªæœˆå‰ï¼Œè€æçªç„¶å˜äº†ã€‚

ç¬¬ä¸€æ¬¡æ˜¯åœ¨éº»å°†æ¡Œä¸Šã€‚

è€ç‹æ‘¸å®Œç‰Œï¼Œç­‰è€æå‡ºç‰Œï¼Œå«äº†ä¸¤å£°æ²¡äººåº”ã€‚

è½¬å¤´ä¸€çœ‹ï¼Œè€ææ­£ä½ç€å¤´ç©æ‰‹æœºï¼Œçœ‰å¤´ç´§é”ï¼Œå˜´é‡Œè¿˜å˜Ÿå›”ç€ä»€ä¹ˆ"å·®ä¸¤åƒæœ¨å¤´"ã€"è‹±é›„å‡ä¸äº†çº§"ä¹‹ç±»çš„è¯ã€‚

"è€æï¼è¯¥ä½ äº†ï¼"è€ç‹æ‹äº†æ‹æ¡Œå­ã€‚

è€æè¿™æ‰å›è¿‡ç¥ï¼Œæ…Œå¿™æ‰“äº†å¼ ç‰Œï¼Œç»“æœä¸€çœ‹ï¼Œç‚¹ç‚®äº†ã€‚

"ä½ ä»Šå¤©æ€ä¹ˆå›äº‹ï¼Ÿé­‚å„¿éƒ½ä¸åœ¨äº†ã€‚"è€åˆ˜ç¬‘ç€è¯´ã€‚

è€ææŒ æŒ å¤´ï¼Œä¸å¥½æ„æ€åœ°è¯´ï¼š"å“ï¼Œç©äº†ä¸ªæ¸¸æˆï¼Œæœ‰ç‚¹ä¸Šå¤´ã€‚"

"ä»€ä¹ˆæ¸¸æˆï¼Ÿ"è€ç‹å¥½å¥‡åœ°å‡‘è¿‡å»ã€‚

è€ææŠŠæ‰‹æœºå±å¹•è½¬è¿‡æ¥ï¼Œä¸Šé¢æ˜¯ä¸€å †åƒµå°¸ã€å¦å…‹ã€è¿˜æœ‰ä¸€ä¸ªå†™ç€å¤§æ•°å­—çš„å‘å…‰é—¨ã€‚

"L\*\*t W\*rï¼Œæœ«æ—¥æ±‚ç”Ÿçš„ã€‚"è€æè¯´ï¼Œ"å¯å¥½ç©äº†ï¼Œæ‰“åƒµå°¸ï¼Œå»ºåŸºåœ°ï¼Œè¿˜èƒ½å‡çº§è‹±é›„ã€‚"

è€çˆ¹å½“æ—¶ç¥äº†ä¸€çœ¼ï¼Œæ²¡å¤šè¯´ä»€ä¹ˆã€‚

ä½†æ¥ä¸‹æ¥å‡ å‘¨ï¼Œè€æåœ¨éº»å°†æ¡Œä¸Šçš„å¿ƒæ€è¶Šæ¥è¶Šä¸åœ¨ç‰Œä¸Šã€‚

è¦ä¹ˆæ‘¸ç‰Œæ…¢åŠæ‹ï¼Œè¦ä¹ˆæ‰“é”™ç‰Œï¼Œç”šè‡³æœ‰ä¸€æ¬¡ç›´æ¥ç«™èµ·æ¥è¯´ï¼š"ä¸å¥½æ„æ€å•Šå…„å¼Ÿä»¬ï¼Œæˆ‘åŸºåœ°è¢«äººæ”»å‡»äº†ï¼Œå¾—èµ¶ç´§å›å»å¤„ç†ä¸€ä¸‹ã€‚"

è¯´å®Œæ‹¿ç€æ‰‹æœºå°±å¾€å•æ‰€è·‘ã€‚

é‚£ä¸€å±€ï¼Œä¸‰ä¸ªäººåœ¨æ¡Œä¸Šå¹²ç­‰äº†åäº”åˆ†é’Ÿã€‚

è€ç‹æ°”å¾—ç›´æ‘‡å¤´ï¼š"è¿™è€æï¼Œè¢«æ¸¸æˆç»‘æ¶äº†ã€‚"

åˆè¿‡äº†ä¸¤å‘¨ï¼Œè€æå¹²è„†ä¸æ¥äº†ã€‚

è€ç‹æ‰“ç”µè¯é—®ä»–ï¼Œä»–è¯´ï¼š"å“å‘€ï¼Œæœ€è¿‘æ¸¸æˆé‡Œæœ‰ä¸ªæ´»åŠ¨ï¼Œå¾—æ”’èµ„æºï¼Œæ²¡æ—¶é—´æ‰“éº»å°†ã€‚"


---

è€çˆ¹è®²å®Œï¼Œæäº†çƒŸã€‚

æˆ‘å¤¹äº†å£èœï¼Œå¿ƒé‡Œæƒ³ç€é‚£ä¸ªæ¸¸æˆã€‚L\*\*t W\*rï¼Œæœ«æ—¥æ±‚ç”Ÿï¼Œæ•°å­—é—¨ï¼Œæ‰“åƒµå°¸ã€‚

èƒ½è®©è€ææ”¾å¼ƒæ‰“äº†åå¹´çš„éº»å°†å±€ï¼Œè¿™æ¸¸æˆèƒŒååº”è¯¥æœ‰ç‚¹ä¸œè¥¿ã€‚

---

> **ä»»åŠ¡åç§°**ï¼šL\*\*t W\*ræ•°å€¼åˆ†æ
> **èµ·å› **ï¼šè€çˆ¹çš„éº»å°†å±€å²Œå²Œå¯å±  
> **ç›®æ ‡**ï¼šåˆ†æL\*\*t W\*ræ•°å€¼è®¾ç½®  
> **ç´§æ€¥ç¨‹åº¦**ï¼šä¸­ç­‰åé«˜ï¼ˆè€çˆ¹å·²ç»å¼€å§‹è€ƒè™‘è¦ä¸è¦ä¸‰ç¼ºä¸€äº†ï¼‰  
> **é¢„è®¡è€—æ—¶**ï¼šä¸¤å‘¨ï¼ˆåŒ…æ‹¬æˆ‘è‡ªå·±å·®ç‚¹æ²¦é™·çš„æ—¶é—´ï¼‰

---

## äºŒã€æ•°å­—é—¨

![æ¸¸æˆæˆªå›¾](/assets/game-reverse/002/2.png){: width="600"}

é‚£å¤©æ™šä¸Šåƒå®Œé¥­ï¼Œæˆ‘å›åˆ°æˆ¿é—´ï¼Œèººåœ¨åºŠä¸Šåˆ·Bç«™ã€‚

å¹¿å‘Šå¼¹å‡ºæ¥äº†ã€‚

ä¸æ˜¯é‚£ç§äº”ç§’å¯è·³è¿‡çš„æ™®é€šå¹¿å‘Šï¼Œè€Œæ˜¯ä¿¡æ¯æµé‡Œçš„"å†…å®¹æ¨è"â€”â€”ç”»é¢é‡Œï¼Œä¸€ç¾¤å°äººæ‹¿ç€æªå¾€å‰å†²ï¼Œå‰é¢æœ‰ä¸ªå‘å…‰çš„é—¨ï¼Œé—¨ä¸Šå†™ç€å·¨å¤§çš„æ•°å­—ã€‚

å°äººå†²è¿‡é—¨çš„ç¬é—´ï¼Œäººæ•°æš´æ¶¨â€”â€”ä»å‡ åäººï¼Œå˜æˆå¯†å¯†éº»éº»ä¸€å¤§ç‰‡ï¼Œç„¶åä¸€è‚¡è„‘å†²å‘åƒµå°¸ç¾¤ã€‚

è¿™ä¸å°±æ˜¯è€çˆ¹è¯´çš„é‚£ä¸ªæ¸¸æˆï¼Ÿ

è™½ç„¶å¿ƒé‡Œé—ªè¿‡ä¸€ä¸"æ‰‹æœºæ˜¯ä¸æ˜¯åœ¨å·å¬"çš„è¯¡å¼‚æ„Ÿï¼Œä½†ä¹Ÿæ²¡å¤šæƒ³â€”â€”è¿™æ¸¸æˆæœ€è¿‘å¹¿å‘Šé“ºå¾—åˆ°å¤„éƒ½æ˜¯ï¼Œåˆ·åˆ°å¾ˆæ­£å¸¸ã€‚

æˆ‘åˆå¾€ä¸‹åˆ·äº†å‡ æ¡ï¼Œç»“æœæ¥ä¸‹æ¥åˆæ˜¯ä¸¤æ¡åŒæ ·çš„å¹¿å‘Šã€‚

ç®—æ³•å¾ˆæ‰§ç€ã€‚

æˆ‘çœ‹äº†å¥½å‡ éï¼Œé€æ¸ç†è§£äº†ç©æ³•æ ¸å¿ƒï¼š

éƒ¨é˜Ÿé€šè¿‡é—¨æ—¶ï¼Œæ ¹æ®é—¨ä¸Šçš„æ•°å­—è¿›è¡ŒåŠ å‡ä¹˜é™¤è¿ç®—ï¼Œäººæ•°æš´æ¶¨æˆ–æš´è·Œã€‚ç©å®¶è¦åšçš„ï¼Œå°±æ˜¯é€‰æ‹©åˆé€‚çš„è·¯çº¿ï¼Œè®©éƒ¨é˜Ÿæ•°é‡æœ€å¤§åŒ–ï¼Œç„¶åç¢¾å‹æ•Œäººã€‚

çœ‹ç€ç¡®å®æŒºçˆ½çš„ã€‚

æˆ‘é¡ºæ‰‹ä¸‹è½½äº†ä¸€ä¸ªï¼Œæƒ³çœ‹çœ‹æ˜¯ä»€ä¹ˆä¸œè¥¿èƒ½è®©è€ææ”¾å¼ƒæ‰“äº†åå¹´çš„éº»å°†å±€ã€‚

---

æˆ‘ä½ä¼°äº†è¿™æ¸¸æˆçš„"ç²˜æ€§"ã€‚

æœ¬æ¥åªæ˜¯æƒ³éšä¾¿ç©ç©ï¼Œç»“æœä¸€ç©å°±æ˜¯ä¸‰ä¸ªå°æ—¶ã€‚

è¿™æ¸¸æˆçš„èŠ‚å¥è®¾è®¡å¾—å¾ˆå·§å¦™ï¼š

- æ¯ä¸€å…³åªè¦ä¸€ä¸¤åˆ†é’Ÿï¼Œç©å®Œå°±èƒ½çœ‹åˆ°ç»“æœã€‚
- è¿‡å…³ä¹‹åç«‹åˆ»æœ‰å¥–åŠ±ï¼šé‡‘å¸ã€æœ¨æã€è‹±é›„ç¢ç‰‡ã€‚
- å¥–åŠ±åˆšå¥½èƒ½å‡çº§ç‚¹ä»€ä¹ˆï¼Œå‡çº§å®Œåˆè§£é”æ–°å†…å®¹ã€‚
- ç„¶åä½ ä¼šæƒ³ï¼š"è¦ä¸å†æ‰“ä¸€å…³è¯•è¯•æ–°è‹±é›„ï¼Ÿ"

å°±è¿™æ ·ï¼Œä¸€å…³æ¥ä¸€å…³ï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥ã€‚

æœ€è®©æˆ‘å°è±¡æ·±åˆ»çš„ï¼Œæ˜¯é‚£ä¸ª"æ•°å­—é—¨"çš„ç¬é—´ã€‚

å½“ä½ çš„éƒ¨é˜Ÿä» 500 äººé€šè¿‡ä¸€ä¸ª"Ã—3"çš„é—¨ï¼Œå˜æˆ 1500 äººçš„æ—¶å€™ï¼Œé‚£ç§è§†è§‰å†²å‡»å’Œå¿ƒç†æ»¡è¶³æ„Ÿéå¸¸å¼ºçƒˆã€‚

ä½ ä¼šè§‰å¾—ï¼š"æˆ‘å˜å¼ºäº†ã€‚"

å°½ç®¡è¿™åªæ˜¯ä¸ªæ•°å­—çš„å˜åŒ–ï¼Œå°½ç®¡ä¸‹ä¸€å…³è¿™ä¸ªæ•°å­—ä¼šæ¸…é›¶é‡æ¥ï¼Œä½†åœ¨é‚£ä¸€ç¬é—´ï¼Œä½ ç¡®å®ä¼šæœ‰ä¸€ç§"çˆ½"çš„æ„Ÿè§‰ã€‚

æˆ‘æ”¾ä¸‹æ‰‹æœºï¼Œçœ‹äº†çœ¼æ—¶é—´ï¼šå‡Œæ™¨ä¸¤ç‚¹ã€‚

ç„¶åæˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š

**è¿™æ¸¸æˆä¸ºä»€ä¹ˆè¿™ä¹ˆå®¹æ˜“è®©äººä¸Šç˜¾ï¼Ÿ**

ä¸åªæ˜¯æˆ‘ï¼Œè€æä¹Ÿæ˜¯ï¼Œç”šè‡³æ„¿æ„ä¸ºæ­¤æ”¾å¼ƒæ‰“äº†åå¹´çš„éº»å°†å±€ã€‚

è¿™èƒŒåï¼Œè‚¯å®šæœ‰ä»€ä¹ˆæœºåˆ¶åœ¨èµ·ä½œç”¨ã€‚

---

## ä¸‰ã€æ‹†åŒ…

ç¬¬äºŒå¤©æ—©ä¸Šï¼Œæˆ‘æŠŠAPKä¸‹è½½ä¸‹æ¥ï¼Œä¸¢è¿›å·¥ä½œç›®å½•ã€‚

æ ‡å‡†æµç¨‹ï¼šè§£åŒ…ã€çœ‹ç»“æ„ã€æ‰¾å…¥å£ã€‚

```
apk/
â”œâ”€â”€ lib/arm64-v8a/
â”‚   â”œâ”€â”€ libil2cpp.so      # Unity IL2CPP
â”‚   â””â”€â”€ libxlua.so        # Luaå¼•æ“
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ bin/Data/         # Unityèµ„æº
â”‚   â”œâ”€â”€ table/            # æ•°æ®è¡¨ï¼Ÿ
â”‚   â””â”€â”€ locale/           # æœ¬åœ°åŒ–æ–‡æœ¬
â””â”€â”€ ...
```

![APKç›®å½•ç»“æ„](/assets/game-reverse/002/1.png){: width="700"}

å…¸å‹çš„Unity + Luaæ··åˆæ¶æ„ã€‚

æˆ‘å…ˆçœ‹äº†çœ¼`libil2cpp.so`ï¼Œ1.75MBï¼Œä¸åº”è¯¥è¿™ä¹ˆå°ã€‚

æ­£å¸¸æµç¨‹æ˜¯ç”¨Il2CppDumperå¯¼å‡ºç¬¦å·ï¼Œå†ç”¨IDAåˆ†æC#é€»è¾‘ã€‚

ä½†æˆ‘æ€è€ƒäº†ä¸€ä¸‹ã€‚

è¿™ç§SLGæ‰‹æ¸¸ï¼Œæ ¸å¿ƒæ•°å€¼é€»è¾‘ä¸€èˆ¬ä¸åœ¨C#å±‚ã€‚C#åšæ¡†æ¶å’Œåº•å±‚ï¼ŒLuaåšä¸šåŠ¡å’Œé…ç½®ï¼Œè¿™æ˜¯æ¯”è¾ƒå¸¸è§çš„æ¶æ„ã€‚

è€Œä¸”ä»æ–‡ä»¶å¤§å°æ¥çœ‹ï¼Œ1.75MBçš„soæ–‡ä»¶ï¼Œå¤§æ¦‚ç‡åªæ˜¯ä¸ªloaderã€‚

**å…ˆçœ‹Luaï¼ŒIL2CPPçš„éƒ¨åˆ†ä»¥åå†è¯´ã€‚**

---

## å››ã€æ‰¾Lua

Luaè„šæœ¬ä¸€èˆ¬æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š

1. æ˜æ–‡.luaæ–‡ä»¶ï¼ˆå°‘è§ï¼Œå®¹æ˜“è¢«åˆ†æï¼‰
2. ç¼–è¯‘åçš„.luacå­—èŠ‚ç ï¼ˆå¸¸è§ï¼‰

æˆ‘åœ¨assetsç›®å½•ä¸‹ç¿»äº†ä¸€åœˆï¼Œæ²¡æ‰¾åˆ°æ˜æ˜¾çš„luaæ–‡ä»¶ã€‚

ä½†æ³¨æ„åˆ°ä¸€ä¸ªå¯ç–‘çš„æ–‡ä»¶ï¼š`assets/table/table_27151_4f2c4fb3e712c5a49d5f71e2f2bb51f5.data`

![æ•°æ®è¡¨å‹ç¼©åŒ…](/assets/game-reverse/002/3.png){: width="700"}

11MBå·¦å³ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªæ‰“åŒ…æ–‡ä»¶ã€‚

æˆ‘ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨çœ‹äº†ä¸‹æ–‡ä»¶å¤´ï¼š

```
50 4B 03 04  14 00 00 00
```

ZIPæ ¼å¼ã€‚

æ”¹ä¸ªåç¼€åï¼Œè§£å‹ï¼š

```
table/
â”œâ”€â”€ lw_hero
â”œâ”€â”€ lw_hero_skill
â”œâ”€â”€ lw_building
â”œâ”€â”€ activity_blue_shop
â”œâ”€â”€ ...
â””â”€â”€ (997ä¸ªæ–‡ä»¶ï¼Œæ²¡æœ‰æ‰©å±•å)
```

è¿™äº›æ–‡ä»¶æ²¡æœ‰æ‰©å±•åï¼Œä½†çœ‹magic numberå°±çŸ¥é“æ˜¯ä»€ä¹ˆï¼š

```
1B 4C 75 61 53
```

Lua 5.3çš„å­—èŠ‚ç ã€‚

![Luaå­—èŠ‚ç æ–‡ä»¶å¤´](/assets/game-reverse/002/4.png){: width="700"}

åŸæ¥æ‰€æœ‰æ•°æ®è¡¨éƒ½æ‰“åŒ…åœ¨è¿™ä¸€ä¸ªZIPé‡Œï¼Œ997ä¸ª.luacæ–‡ä»¶ã€‚

ä½†è¿™åªæ˜¯æ•°æ®è¡¨éƒ¨åˆ†ï¼Œæ¸¸æˆé€»è¾‘ä»£ç åº”è¯¥è¿˜æœ‰åˆ«çš„åœ°æ–¹ã€‚

---

## äº”ã€Frida Hook

é™æ€æ‰¾ä¸åˆ°ï¼Œé‚£å°±åŠ¨æ€æå–ã€‚

æˆ‘å†™äº†ä¸ªFridaè„šæœ¬ï¼ŒHook `libxlua.so`çš„Luaè„šæœ¬åŠ è½½å‡½æ•°ï¼Œåœ¨è¿è¡Œæ—¶æŠŠæ‰€æœ‰åŠ è½½çš„å­—èŠ‚ç dumpå‡ºæ¥ã€‚

**å…³é”®é€»è¾‘**ï¼š

å®¢æˆ·ç«¯ï¼ˆTypeScriptï¼‰ï¼š
```typescript
// Hook luaL_loadbufferxå‡½æ•°
Interceptor.attach(p_luaL_loadbufferx, {
    onEnter: function(args) {
        const buff = args[1];              // è„šæœ¬å†…å®¹
        const size = args[2].toInt32();    // å¤§å°
        const name = args[3];              // è„šæœ¬å
        
        const script_name = name.readCString() || "unknown";
        
        if (size > 0 && size < 10 * 1024 * 1024) {
            const script_data = buff.readByteArray(size);
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯luaå­—èŠ‚ç  (0x1b 0x4c 0x75 0x61)
            const header = new Uint8Array(script_data.slice(0, 4));
            const is_bytecode = header[0] === 0x1b && header[1] === 0x4c;
            
            // å‘é€åˆ°Pythonç«¯ä¿å­˜
            send({
                type: 'LuaScript',
                name: script_name,
                size: size,
                is_bytecode: is_bytecode
            }, script_data);
        }
    }
});
```

æœåŠ¡ç«¯ï¼ˆPythonï¼‰ï¼š
```python
case "LuaScript":
    script_name = sanitize_filename(payload['name'])
    is_bytecode = payload.get('is_bytecode', False)
    ext = '.luac' if is_bytecode else '.lua'
    filename = f"{lua_script_count:04d}_{script_name}{ext}"
    lua_script_count += 1
    save_file(f"./lua_scripts/{filename}", data)
```

å¯åŠ¨æ¸¸æˆï¼ŒæŒ‚ä¸ŠFridaï¼Œç­‰å¾…ã€‚

è„šæœ¬å¼€å§‹ç–¯ç‹‚è¾“å‡ºï¼š

```
[*] luaL_loadbufferx è¢«è°ƒç”¨
  name: @Common.Main
  size: 15234 bytes
  ç±»å‹: Luaå­—èŠ‚ç (luac)
  [âˆš] å·²dumpè„šæœ¬: @Common.Main

[*] luaL_loadbufferx è¢«è°ƒç”¨
  name: @LuaLogic.Hero.HeroController
  size: 45678 bytes
  ç±»å‹: Luaå­—èŠ‚ç (luac)
  [âˆš] å·²dumpè„šæœ¬: @LuaLogic.Hero.HeroController
...
```

æœ€ç»ˆæå–äº†2371ä¸ª.luacæ–‡ä»¶ã€‚

çœ‹æ–‡ä»¶åï¼Œç¡®å®æœ‰æ¸¸æˆé€»è¾‘ï¼š
- `HeroController.luac` - è‹±é›„ç®¡ç†
- `BattleManager.luac` - æˆ˜æ–—ç®¡ç†
- `ShopController.luac` - å•†åº—é€»è¾‘

è¿˜æœ‰71ä¸ªæ•°æ®è¡¨æ–‡ä»¶ï¼š
- `@LuaDatatable.lw_hero.luac`
- `@LuaDatatable.lw_hero_skill.luac`
- ...

ç°åœ¨é—®é¢˜å˜æˆäº†ï¼š**æ€ä¹ˆæŠŠè¿™äº›å­—èŠ‚ç åç¼–è¯‘å›æºç ï¼Ÿ**

---

## å…­ã€unluacæ”¹é€ 

æ ‡å‡†çš„Luaåç¼–è¯‘å·¥å…·æ˜¯unluacã€‚æˆ‘è¯•äº†ä¸€ä¸‹ï¼š

```bash
java -jar unluac.jar 0002_@Common.Main.luac
```

æŠ¥é”™ï¼š

```
IllegalStateException: The input chunk reports a non-standard lua format: 1
```

åˆæ˜¯è‡ªå®šä¹‰æ ¼å¼ã€‚

æˆ‘ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨å¯¹æ¯”äº†æ ‡å‡†Lua 5.3å’ŒLast Warçš„å­—èŠ‚ç headerï¼š

```
æ ‡å‡†ç‰ˆï¼š
0x00-0x03: 1B 4C 75 61 (é­”æ•°)
0x04:      53          (ç‰ˆæœ¬ 5.3)
0x05:      00          (format = 0)
...

Last Warç‰ˆï¼š
0x00-0x03: 1B 4C 75 61
0x04:      53
0x05:      01          (format = 1)  â† æ”¹äº†è¿™é‡Œ
...
```

ç»§ç»­å¾€ä¸‹çœ‹ï¼Œå‘ç°ä»–ä»¬è¿˜è°ƒæ•´äº†headerå­—æ®µçš„é¡ºåºï¼Œåˆ æ‰äº†`sizeof(lua_Number)`å­—æ®µã€‚

å…¸å‹çš„åé€†å‘ä¿æŠ¤ï¼šæ”¹ä¸ªformatæ ‡å¿—ï¼Œè®©æ ‡å‡†å·¥å…·è¯†åˆ«ä¸äº†ã€‚

ä¸è¿‡è¿™ä¸ªä¿æŠ¤å¼ºåº¦å¾ˆä½ï¼Œæ”¹ä¸€ä¸‹unluacæºç å°±èƒ½ç»•è¿‡ã€‚

æˆ‘æ‰¾åˆ°unluacçš„æºç ï¼Œä¿®æ”¹äº†`LHeaderType.java`ï¼š

```java
// ä¿®æ”¹1ï¼šæ”¯æŒformat=1
if(format != 0 && format != 1) {
    throw new IllegalStateException("...");
}

// ä¿®æ”¹2ï¼šæ ¹æ®formatè°ƒæ•´å­—æ®µè§£æé¡ºåº
if(s.format == 1) {
    // Last Warä¿®æ”¹ç‰ˆ
    parse_instruction_size(buffer, header, s);
    parse_integer_size(buffer, header, s);
    parse_size_t_size(buffer, header, s);
    s.lFloatSize = 8;  // ä½¿ç”¨é»˜è®¤å€¼
} else {
    // æ ‡å‡†ç‰ˆ
    parse_size_t_size(buffer, header, s);
    parse_instruction_size(buffer, header, s);
    parse_integer_size(buffer, header, s);
    parse_float_size(buffer, header, s);
}
```

é‡æ–°ç¼–è¯‘ï¼Œå†è¯•ï¼š

```bash
java -jar unluac.jar 0002_@Common.Main.luac
```

æˆåŠŸè¾“å‡ºå®Œæ•´çš„Luaæºç ã€‚

æˆ‘å†™äº†ä¸ªæ‰¹é‡åç¼–è¯‘è„šæœ¬ï¼Œè·‘äº†ä¸€éï¼š

```
Total: 2371 files
Success: 2356 files (99.4%)
Failed: 15 files (0.6%)
```

å¤±è´¥çš„15ä¸ªæ–‡ä»¶åº”è¯¥æ˜¯æŸåæˆ–è€…ç‰¹æ®Šæ ¼å¼ï¼Œä¸å½±å“å¤§å±€ã€‚

ç°åœ¨æˆ‘æœ‰Luaæºæ–‡ä»¶äº†ã€‚

**ç›¸å…³èµ„æº**ï¼š
- **ä¿®æ”¹åçš„unluacå·¥å…·**ï¼š[unluac.jar](/assets/game-reverse/002/unluac.jar)
- **åç¼–è¯‘åçš„Luaä»£ç **ï¼š[lua_decompiled.zip](/assets/game-reverse/002/lua_decompiled.zip)

---

## ä¸ƒã€æ•°æ®è¡¨è½¬æ¢

åç¼–è¯‘å‡ºæ¥çš„æ•°æ®è¡¨æ–‡ä»¶ï¼Œå†…å®¹æ˜¯è¿™æ ·çš„ï¼š

```lua
local L0_1, L1_1, L2_1, L3_1, L4_1
L0_1 = {}

-- è¡¨ç»“æ„å®šä¹‰ï¼ˆindexï¼‰
L1_1 = {}
L2_1 = {}
L3_1 = 1              -- ç¬¬1åˆ—
L4_1 = "number"       -- ç±»å‹æ˜¯number
L2_1[1] = L3_1
L2_1[2] = L4_1
L1_1.id = L2_1        -- å­—æ®µåï¼šid

L2_1 = {}
L3_1 = 2              -- ç¬¬2åˆ—
L4_1 = "number"
L2_1[1] = L3_1
L2_1[2] = L4_1
L1_1.switch_type = L2_1   -- å­—æ®µåï¼šswitch_type
...
L0_1.index = L1_1     -- ä¿å­˜è¡¨ç»“æ„

-- å®é™…æ•°æ®ï¼ˆdataï¼‰
L1_1 = {}
L2_1 = {}
L3_1 = 101            -- ç¬¬1åˆ—æ•°æ®
L4_1 = 1              -- ç¬¬2åˆ—æ•°æ®
L2_1[1] = L3_1
L2_1[2] = L4_1
L1_1[101] = L2_1      -- ä¸€è¡Œæ•°æ®ï¼ŒID=101

L2_1 = {}
L3_1 = 102
L4_1 = 1
L2_1[1] = L3_1
L2_1[2] = L4_1
L1_1[102] = L2_1      -- ä¸€è¡Œæ•°æ®ï¼ŒID=102
...
L0_1.data = L1_1      -- ä¿å­˜æ•°æ®

-- å­—ç¬¦ä¸²æ± ï¼ˆvExtï¼Œæœ‰äº›è¡¨æœ‰ï¼Œæœ‰äº›è¡¨æ²¡æœ‰ï¼‰
L1_1 = {}
L2_1 = "hero_name_001"
L3_1 = "hero_desc_001"
L1_1[1] = L2_1
L1_1[2] = L3_1
L0_1.vExt = L1_1      -- ä¿å­˜å­—ç¬¦ä¸²æ± 

return L0_1
```

ç»“æ„å¾ˆæ¸…æ™°ï¼š
- `index`ï¼šè¡¨ç»“æ„å®šä¹‰ï¼ˆå­—æ®µåã€åˆ—ç´¢å¼•ã€æ•°æ®ç±»å‹ï¼‰
- `data`ï¼šå®é™…æ•°æ®ï¼ˆæ¯è¡Œæ˜¯ä¸€ä¸ªtableï¼Œä»¥IDä¸ºkeyï¼‰
- `vExt`ï¼šå­—ç¬¦ä¸²æ± ï¼ˆç”¨æ¥å‡å°ä½“ç§¯ï¼Œæ•°æ®ä¸­å­˜ç´¢å¼•è€Œä¸æ˜¯å®Œæ•´å­—ç¬¦ä¸²ï¼‰

è¿™ç§æ ¼å¼äººçœ‹ä¸æ‡‚ï¼Œéœ€è¦è½¬æˆCSVæ‰èƒ½åˆ†æã€‚

ä½†è½¬æ¢ä¸æ˜¯ç®€å•çš„æ ¼å¼è½¬æ¢ã€‚å¥½æ¶ˆæ¯æ˜¯è¿™äº›Luaè¡¨æ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œå¯ä»¥ç›´æ¥ç”¨Lua VMåŠ è½½ï¼›åæ¶ˆæ¯æ˜¯æ¸¸æˆç”¨`LocalController`è¯»å–è¿™äº›è¡¨ï¼Œè€ŒLocalControlleræœ‰å¤–éƒ¨ä¾èµ–ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œã€‚

è§£å†³æ–¹æ¡ˆï¼šå‚ç…§åŸç‰ˆLocalControllerçš„é€»è¾‘ï¼Œå†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„åŠ è½½å™¨ã€‚

æˆ‘çš„å®ç°æ€è·¯ï¼š

1. **ç”¨Luaå†™åŠ è½½å™¨**ï¼ˆ`lua_datatable_loader.lua`ï¼‰
   - å®ç°LocalControllerçš„æ ¸å¿ƒé€»è¾‘ï¼ˆåŠ è½½indexã€dataã€vExtï¼‰
   - æ”¯æŒå­—æ®µè§£æå’ŒvExtå­—ç¬¦ä¸²æ± å±•å¼€
   - æä¾›CSVå¯¼å‡ºåŠŸèƒ½

2. **ç”¨Pythonå†™æ‰¹é‡è°ƒåº¦å·¥å…·**ï¼ˆ`export_tables_to_csv.py`ï¼‰
   - éå†æ‰€æœ‰Luaè¡¨æ–‡ä»¶
   - è°ƒç”¨`tools\lua.exe`æ‰§è¡ŒLuaåŠ è½½å™¨
   - æ‰¹é‡å¯¼å‡ºCSV

æˆ‘æŠŠLocalControllerçš„å…³é”®é€»è¾‘å–‚ç»™AIï¼Œè®©å®ƒæŒ‰ç…§è¿™ä¸ªæ€è·¯ç”Ÿæˆä»£ç ã€‚è°ƒè¯•å‡ è½®åï¼Œè·‘èµ·æ¥äº†ï¼š

```bash
python export_tables_to_csv.py all
```

```
æ•°æ®è¡¨æ‰¹é‡å¯¼å‡ºå·¥å…· (ä¼˜åŒ–ç‰ˆ)
============================================================

[*] æ‰¾åˆ° 805 ä¸ªæ•°æ®è¡¨

è¿›åº¦: [1/805]
[*] æ­£åœ¨å¯¼å‡ºè¡¨: ABtest_controller
  [...] æ­£åœ¨å¯¼å‡º...
  [+] å®Œæˆ: 7 è¡Œå·²å¯¼å‡ºåˆ° re-code\datatable\ABtest_controller.csv

è¿›åº¦: [2/805]
[*] æ­£åœ¨å¯¼å‡ºè¡¨: ai_switch
  [...] æ­£åœ¨å¯¼å‡º...
  [+] å®Œæˆ: 12 è¡Œå·²å¯¼å‡ºåˆ° re-code\datatable\ai_switch.csv

...

è¿›åº¦: [805/805]
[*] æ­£åœ¨å¯¼å‡ºè¡¨: zombie_talent
  [...] æ­£åœ¨å¯¼å‡º...
  [+] å®Œæˆ: 43 è¡Œå·²å¯¼å‡ºåˆ° re-code\datatable\zombie_talent.csv

============================================================
å¯¼å‡ºå®Œæˆ!
============================================================
æˆåŠŸ: 805/805
```

805ä¸ªCSVæ–‡ä»¶ï¼Œä¸€ä¸ªä¸å°‘ã€‚

éšæ‰‹æ‰“å¼€ä¸€ä¸ªçœ‹çœ‹ï¼š

```csv
id,switch_type,switch_title,switch_des
101,1,900517,900524
102,1,900518,900524
103,1,900519,900524
...
```

è¡¨å¤´æ¸…æ™°ï¼Œæ•°æ®æ•´é½ï¼Œå®Œç¾ã€‚

**å®Œæ•´æ•°æ®è¡¨ä¸‹è½½**ï¼š[all_datatable_csv.zip](/assets/game-reverse/002/all_datatable_csv.zip) ï¼ˆ805ä¸ªCSVæ–‡ä»¶ï¼‰

å®Œæ•´çš„å¯¼å‡ºå·¥å…·ä»£ç ï¼š

- **Pythonæ‰¹é‡è°ƒåº¦å·¥å…·**ï¼š[export_tables_to_csv.py](/assets/game-reverse/002/export_tables_to_csv.py)
- **Luaæ•°æ®è¡¨åŠ è½½å™¨**ï¼š[lua_datatable_loader.lua](/assets/game-reverse/002/lua_datatable_loader.lua)

---

## å…«ã€æœ¬åœ°åŒ–å­—ç¬¦ä¸²

CSVè¡¨é‡Œæœ‰äº›å­—æ®µæ˜¯è¿™æ ·çš„ï¼š

```
name: revival_plan_phasename01
desc: revival_plan_phase01_explain01
```

è¿™äº›æ˜¯æœ¬åœ°åŒ–keyï¼Œéœ€è¦è½¬æ¢æˆä¸­æ–‡æ‰èƒ½çœ‹æ‡‚ã€‚

æˆ‘æ‰¾åˆ°æœ¬åœ°åŒ–æ–‡ä»¶çš„ä½ç½®ï¼š`apk/assets/locale/22299/`

é‡Œé¢æœ‰å¥½å‡ ä¸ª`.bin`æ–‡ä»¶ï¼š
- `zh_CN.bin`
- `en_US.bin`
- `ar.bin`

åˆæ˜¯è‡ªå®šä¹‰æ ¼å¼ã€‚

æˆ‘çœ‹äº†ä¸‹äºŒè¿›åˆ¶ç»“æ„ï¼Œæ¨æµ‹æ˜¯æŸç§key-valueå­˜å‚¨ï¼Œä½†å…·ä½“æ ¼å¼ä¸çŸ¥é“ã€‚

æˆ‘åˆæ‰¾åˆ°äº†åŠ è½½æœ¬åœ°åŒ–çš„Luaä»£ç ï¼Œç†è§£äº†æ ¼å¼ï¼š

```
header (å›ºå®šå­—èŠ‚)
key_count (int32)
for i=1 to key_count:
    key_length (int16)
    key_string (utf8)
    value_length (int16)
    value_string (utf8)
```

æˆ‘æŠŠè¿™æ®µé€»è¾‘æè¿°ç»™AIï¼Œè®©å®ƒå†™ä¸€ä¸ªäºŒè¿›åˆ¶è½¬JSONçš„è„šæœ¬ã€‚

10åˆ†é’Ÿåï¼Œè„šæœ¬å†™å¥½äº†ï¼Œè·‘ä¸€éï¼š

```bash
python convert_locale.py zh_CN.bin zh_CN.json
```

ç”Ÿæˆäº†ä¸€ä¸ª45484è¡Œçš„JSONæ–‡ä»¶ï¼š

```json
{
    "revival_plan_phasename01": "ç¬¬1å¤©ï¼šé›·è¾¾ç‰¹è®­",
    "revival_plan_phase01_explain01": "å®ŒæˆæŒ‡å®šä»»åŠ¡è·å¾—å¥–åŠ±",
    ...
}
```

**æœ¬åœ°åŒ–æ–‡ä»¶ä¸‹è½½**ï¼š[locale.zip](/assets/game-reverse/002/locale.zip) ï¼ˆ45484æ¡ä¸­æ–‡æ–‡æœ¬ï¼‰

---

## ä¹ã€CSVæŸ¥çœ‹å™¨

ç°åœ¨æˆ‘æœ‰äº†ï¼š
- æ•°æ®è¡¨
- æœ¬åœ°åŒ–å­—å…¸

ä½†æœ‰ä¸ªé—®é¢˜ï¼š**æ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°å¯¹åº”çš„è¡¨ï¼Ÿ**

æ¯”å¦‚ï¼Œæˆ‘åœ¨æ¸¸æˆé‡Œçœ‹åˆ°"ç¬¬1å¤©ï¼šé›·è¾¾ç‰¹è®­"ï¼Œæˆ‘æƒ³çŸ¥é“è¿™ä¸ªæ´»åŠ¨çš„é…ç½®åœ¨å“ªä¸ªè¡¨é‡Œã€‚

å¦‚æœæ‰‹åŠ¨ç¿»805ä¸ªè¡¨ï¼Œå¾—ç¿»åˆ°çŒ´å¹´é©¬æœˆã€‚

æˆ‘éœ€è¦ä¸€ä¸ªå·¥å…·ï¼š
1. è¾“å…¥ä¸­æ–‡æ–‡æ¡ˆï¼ŒåæŸ¥å‡ºæ˜¯å“ªä¸ªæœ¬åœ°åŒ–key
2. æœç´¢è¿™ä¸ªkeyåœ¨å“ªäº›CSVè¡¨é‡Œå‡ºç°
3. ç›´æ¥æ‰“å¼€å¯¹åº”çš„è¡¨ï¼Œå®šä½åˆ°å…·ä½“ä½ç½®

æˆ‘æŠŠéœ€æ±‚æè¿°æ¸…æ¥šï¼Œè®©AIå†™ä¸€ä¸ªGUIå·¥å…·ã€‚å‡ è½®å¯¹è¯åï¼Œä¸€ä¸ªå®Œæ•´çš„CSVæŸ¥çœ‹å™¨å°±å†™å¥½äº†ï¼š

```
åŠŸèƒ½ï¼š
âœ“ æ‰“å¼€CSVæ–‡ä»¶ï¼Œè‡ªåŠ¨è¯†åˆ«ç¼–ç 
âœ“ æœ¬åœ°åŒ–è½¬æ¢ï¼ˆkey â†’ ä¸­æ–‡ï¼‰
âœ“ åå‘æœç´¢ï¼ˆä¸­æ–‡ â†’ å®šä½è¡¨å’Œä½ç½®ï¼‰
âœ“ å¯¼å‡ºExcel
âœ“ åˆ—æ’åºã€ç­›é€‰
```

æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼š

```
æœç´¢ï¼š"ç¬¬1å¤©ï¼šé›·è¾¾ç‰¹è®­"
  â†“
æ‰¾åˆ°key: revival_plan_phasename01
  â†“
æ‰¾åˆ°è¡¨: revival_plan.csv, ç¬¬3è¡Œ
  â†“
åŒå‡»æ‰“å¼€ï¼Œè‡ªåŠ¨å®šä½
```

å®Œæ•´çš„CSVæŸ¥çœ‹å™¨å·¥å…·ï¼š[csv_viewer.zip](/assets/game-reverse/002/csv_viewer.zip)

---

## åã€æ•°å€¼åˆ†æ

ç°åœ¨ç»ˆäºåˆ°äº†æ ¸å¿ƒç¯èŠ‚ï¼šæ•°å€¼åˆ†æã€‚

æˆ‘æ‰“å¼€`heroes_levelup.csv`ï¼Œè¿™æ˜¯è‹±é›„å‡çº§è¡¨ï¼š

```csv
id,exp,army_num,lv_attr_atk1,...,spend,break_require
1,15,30,15,...,,
2,20,40,37,...,,
3,30,45,58,...,,
...
10,300,80,210,...,500,1
11,350,85,233,...,,
...
20,2300,130,435,...,2000,1
...
30,6400,180,675,...,4000,1
...
40,10700,230,870,...,10000,1
...
```

æˆ‘èŠ±äº†ä¸¤å¤©æ—¶é—´ï¼ŒæŸ¥é˜…äº†ä¸€äº›è¡Œä¸ºå¿ƒç†å­¦å’Œæ¸¸æˆåŒ–è®¾è®¡çš„èµ„æ–™ï¼Œåˆ†æè¿™å¥—æ•°å€¼èƒŒåçš„æœºåˆ¶ã€‚

### æˆç˜¾æœºåˆ¶æ‹†è§£

**1. å˜é‡æ¯”ç‡å¼ºåŒ–**ï¼ˆVariable Ratio Reinforcementï¼‰

å‡çº§æ‰€éœ€ç»éªŒçš„å¢é•¿è§„å¾‹ï¼š

```
Lv 1-9:   æ¯çº§å¢åŠ  +10~50 expï¼ˆçº¿æ€§å¢é•¿ï¼‰
Lv 10:    çªç„¶è·³åˆ° 300 expï¼ˆ"çªç ´"æ¦‚å¿µï¼‰
Lv 11-19: ç»§ç»­å¢é•¿ +50~400 exp
Lv 20:    è·³åˆ° 2300 expï¼ˆç¬¬äºŒä¸ª"çªç ´"ï¼‰
Lv 30:    6400 exp
Lv 40:    10700 exp
```

å‰æœŸå‡çº§å¾ˆå¿«ï¼Œç»™ç©å®¶å³æ—¶åé¦ˆï¼›ä¸­æœŸå¼€å§‹æ”¾ç¼“ï¼Œäº§ç”Ÿ"å·®ä¸€ç‚¹å°±åˆ°ä¸‹ä¸€çº§"çš„çŠ¶æ€ï¼›åæœŸè®¾ç½®"çªç ´"å…³å¡ï¼Œåˆ¶é€ è´¨å˜æ„Ÿã€‚

è¿™æ˜¯æ–¯é‡‘çº³ç®±çš„ç»å…¸åº”ç”¨ï¼šä¸å¯é¢„æµ‹çš„å¥–åŠ±é—´éš”ã€‚

**2. ç¦€èµ‹æ•ˆåº”**ï¼ˆEndowment Effectï¼‰

æ¯æ¬¡å‡çº§ï¼Œå±æ€§å…¨é¢æå‡ï¼š

```
Lv 1:  æ”»å‡» 15,  éƒ¨é˜Ÿæ•° 30
Lv 10: æ”»å‡» 210, éƒ¨é˜Ÿæ•° 80 (+1400% / +267%)
Lv 40: æ”»å‡» 870, éƒ¨é˜Ÿæ•° 230 (+5800% / +767%)
```

æŠ•å…¥çš„æ—¶é—´è¶Šå¤šï¼Œè§’è‰²è¶Šå¼ºï¼Œæ²‰æ²¡æˆæœ¬è¶Šé«˜ã€‚å‡åˆ°30çº§åï¼Œå¼ƒå‘çš„å¿ƒç†æˆæœ¬è¿œé«˜äºç»§ç»­ç©çš„æˆæœ¬ã€‚

**3. å³°ç»ˆå®šå¾‹**ï¼ˆPeak-End Ruleï¼‰

æ¯10çº§è®¾ç½®ä¸€ä¸ª"çªç ´"å…³å¡ï¼š

```
Lv 10: éœ€è¦æ¶ˆè€— 500 "spend"
Lv 20: éœ€è¦æ¶ˆè€— 2000
Lv 30: éœ€è¦æ¶ˆè€— 4000
Lv 40: éœ€è¦æ¶ˆè€— 10000
```

"çªç ´"æ—¶çš„å±æ€§é£™å‡å’Œè§†è§‰ç‰¹æ•ˆï¼Œåˆ¶é€ å³°å€¼ä½“éªŒã€‚è¿™ä¸ªç¬é—´ä¼šè¢«è®°å¿†ç³»ç»Ÿå¼ºåŒ–ï¼Œè®©ç©å®¶æœŸå¾…ä¸‹ä¸€ä¸ª"çªç ´"ã€‚

**4. è”¡æ ¼å°¼å…‹æ•ˆåº”**ï¼ˆZeigarnik Effectï¼‰

å‡çº§èŠ‚å¥è®¾è®¡ï¼š

```
å‰æœŸï¼šç»éªŒå®¹æ˜“è·å–ï¼Œå¿«é€Ÿå‡çº§
ä¸­æœŸï¼šç»éªŒå˜æ…¢ï¼Œä½†"çªç ´"åœ¨çœ¼å‰
åæœŸï¼šç»éªŒè·å–å›°éš¾ï¼Œä½†å·²ç»æŠ•å…¥å¤ªå¤š
```

"å·®ä¸€ç‚¹å°±åˆ°ä¸‹ä¸€çº§"çš„çŠ¶æ€ï¼Œä¼šè®©å¤§è„‘ä¸€ç›´è®°æŒ‚ç€è¿™ä»¶äº‹ã€‚"å†ç©ä¸€ä¼šå„¿ï¼Œé©¬ä¸Šå°±åˆ°40çº§äº†"ï¼Œç„¶åä¸çŸ¥ä¸è§‰ç©åˆ°å‡Œæ™¨ã€‚

---

æ¯ä¸€ä¸ªæ•°å­—èƒŒåï¼Œéƒ½æœ‰å¯¹åº”çš„å¿ƒç†å­¦ä¾æ®ã€‚

è¿™å¥—ç³»ç»Ÿçš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼šè®©ç©å®¶ç»´æŒåœ¨"æ¥è¿‘ç›®æ ‡ä½†æœªè¾¾æˆ"çš„çŠ¶æ€ï¼ŒæŒç»­äº§ç”Ÿå¤šå·´èƒºã€‚

**éœ€è¦è¯´æ˜çš„æ˜¯**ï¼šä»¥ä¸Šåˆ†æåªæ˜¯æ ¹æ®æ•°å€¼è§„å¾‹çš„æ¨æµ‹ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç­–åˆ’çš„çœŸå®æ„å›¾ã€‚ä¹Ÿè®¸åªæ˜¯ç¢°å·§è®¾è®¡æˆäº†è¿™æ ·ã€‚

---

## åä¸€ã€éº»å°†æ¡Œé‡å¯

ä¸¤å‘¨åï¼Œè€çˆ¹çš„éº»å°†å±€åˆå¼€å§‹äº†ã€‚

æˆ‘å¬è¯´è€æå›å½’äº†éº»å°†æ¡Œã€‚

å…·ä½“åŸå› æ˜¯ï¼šä¸Šå‘¨æ—¥ä¸‹åˆï¼Œè€æåœ¨å®¶ç©æ¸¸æˆï¼Œä»–è€å©†è®©ä»–å‡ºé—¨ä¹°åŒ…ç›ã€‚è€æå˜´ä¸Šç­”åº”äº†ï¼Œæ‰‹æ²¡åœï¼Œçœ¼ç›ç›¯ç€å±å¹•ã€‚åŠå°æ—¶åï¼Œä»–è€å©†åœ¨å¨æˆ¿ç­‰ä¸åˆ°ç›ï¼Œå‡ºæ¥ä¸€çœ‹ï¼Œè€æè¿˜ååœ¨æ²™å‘ä¸Šã€‚

ä»–è€å©†æŠŠæ‰‹æœºæ‹¿è¿‡æ¥ï¼Œå½“ç€ä»–é¢å¸è½½äº†æ¸¸æˆï¼Œé—®ä»–ï¼š"ä½ æ˜¯æƒ³ç©æ¸¸æˆï¼Œè¿˜æ˜¯æƒ³è¿‡æ—¥å­ï¼Ÿ"

---

ç¬¬äºŒå¤©æ™šä¸Šï¼Œè€çˆ¹å›æ¥çš„æ—¶å€™å¿ƒæƒ…ä¸é”™ã€‚

"è€æå›æ¥äº†ï¼Ÿ"æˆ‘é—®ã€‚

"å—¯ï¼Œè¾“äº†ä¸¤ç™¾å¤šã€‚"è€çˆ¹ç‚¹äº†æ ¹çƒŸã€‚

æˆ‘æ²¡è¯´è¯ã€‚

è€çˆ¹çœ‹äº†æˆ‘ä¸€çœ¼ï¼š"ä½ æœ€è¿‘ä¹Ÿåœ¨ç©å§ï¼Ÿ"

"ç©è¿‡ã€‚"

"ç©æ˜ç™½äº†ï¼Ÿ"

"å·®ä¸å¤šã€‚"

è€çˆ¹å¼¹äº†å¼¹çƒŸç°ï¼Œæ²¡å†è¯´ä»€ä¹ˆã€‚


---

**ä»»åŠ¡çŠ¶æ€å¡ç‰‡**

> **ä»»åŠ¡åç§°**ï¼šL\*\*t W\*ræ•°å€¼åˆ†æ
> **èµ·å› **ï¼šè€çˆ¹çš„éº»å°†å±€å²Œå²Œå¯å±
> **ç›®æ ‡**ï¼šåˆ†æL\*\*t W\*ræ•°å€¼è®¾ç½®
> **ç´§æ€¥ç¨‹åº¦**ï¼šä¸­ç­‰åé«˜ï¼ˆè€çˆ¹å·²ç»å¼€å§‹è€ƒè™‘è¦ä¸è¦ä¸‰ç¼ºä¸€äº†ï¼‰
> **é¢„è®¡è€—æ—¶**ï¼šä¸¤å‘¨ï¼ˆåŒ…æ‹¬æˆ‘è‡ªå·±å·®ç‚¹æ²¦é™·çš„æ—¶é—´ï¼‰
> **å®é™…è€—æ—¶**ï¼šä¸¤å‘¨
> **ä»»åŠ¡çŠ¶æ€**ï¼šâœ“ å·²å®Œæˆï¼ˆé—®é¢˜åœ¨å…¶ä»–æ¨¡å—å¾—åˆ°è§£å†³ï¼‰

---

## ä»»åŠ¡äº§å‡ºæ¸…å•

**å·¥å…·/è„šæœ¬**
- ğŸ”§ [export_tables_to_csv.py](/assets/game-reverse/002/export_tables_to_csv.py) - Pythonæ‰¹é‡å¯¼å‡ºå·¥å…·
- ğŸ”§ [lua_datatable_loader.lua](/assets/game-reverse/002/lua_datatable_loader.lua) - Luaæ•°æ®è¡¨åŠ è½½å™¨
- ğŸ”§ [csv_viewer.zip](/assets/game-reverse/002/csv_viewer.zip) - CSVæŸ¥çœ‹å™¨GUIå·¥å…·

**é€†å‘äº§ç‰©**
- ğŸ“¦ [unluac.jar](/assets/game-reverse/002/unluac.jar) - ä¿®æ”¹åçš„unluacå·¥å…·ï¼ˆæ”¯æŒè‡ªå®šä¹‰Lua 5.3æ ¼å¼ï¼‰
- ğŸ“¦ [lua_decompiled.zip](/assets/game-reverse/002/lua_decompiled.zip) - åç¼–è¯‘åçš„Luaä»£ç ï¼ˆ2356ä¸ªæ–‡ä»¶ï¼‰
- ğŸ“¦ [all_datatable_csv.zip](/assets/game-reverse/002/all_datatable_csv.zip) - å®Œæ•´æ•°æ®è¡¨ï¼ˆ805ä¸ªCSVæ–‡ä»¶ï¼‰
- ğŸ“¦ [locale.zip](/assets/game-reverse/002/locale.zip) - æœ¬åœ°åŒ–æ–‡ä»¶ï¼ˆ45484æ¡ä¸­æ–‡æ–‡æœ¬ï¼‰

---

ä»£ç ä¼šè¯´çœŸè¯ã€‚

**æœ¬æ–‡ä¸ºåŸºäºçœŸå®æŠ€æœ¯åˆ†æçš„è™šæ„æ•…äº‹ï¼Œæ–‡ä¸­æˆªå›¾ã€å›¾ç‰‡å¦‚æœ‰å±•ç¤ºï¼Œå‡ä½œæŠ€æœ¯ç¤ºæ„ï¼Œä¸å…·ä½“å‚å•†å’Œé¡¹ç›®æ— ç›´æ¥æŒ‡å‘å…³ç³»ã€‚**

**æœ¬æ–‡ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚**

**æœªç»æˆæƒ ç¦æ­¢è½¬è½½ã€‚**

**ç‰ˆæƒæ‰€æœ‰ Â© lxraa 2025**

